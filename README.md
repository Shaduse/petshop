# PetShop - Интернет-магазин для питомцев
Современный, чистый и хорошо структурированный интернет-магазин для товаров кошек и собак, построенный на Flask с нормализованной базой данных.

## Особенности

- ✅ **Современная архитектура**: Flask + SQLAlchemy с правильной нормализацией БД
- ✅ **Система ролей**: Поддержка ролей администратора и обычного пользователя
- ✅ **Аутентификация**: Система входа и регистрации с верификацией
- ✅ **Каталог товаров**: Категории, фильтрация, поиск
- ✅ **Корзина покупок**: Добавление товаров в корзину
- ✅ **Профиль пользователя**: Управление данными, адресами, заказами
- ✅ **Избранное**: Сохранение любимых товаров
- ✅ **Отзывы**: Система оценок и отзывов на товары
- ✅ **Адаптивный дизайн**: Полная поддержка мобильных устройств
- ✅ **Чистый код**: Хорошо организованный и задокументированный код

## Требования

- Python 3.8+
- pip

## Установка

1. **Клонируйте репозиторий**:
```bash
git clone <repository-url>
cd PetShop_Flask
```

2. **Создайте виртуальное окружение**:
```bash
python -m venv venv
source venv/bin/activate  # На Windows: venv\Scripts\activate
```

3. **Установите зависимости**:
```bash
pip install -r requirements.txt
```

4. **Создайте файл .env** (опционально):
```bash
cp .env.example .env
```

5. **Инициализируйте базу данных**:
```bash
python
>>> from app import create_app, db
>>> app = create_app()
>>> with app.app_context():
...     db.create_all()
>>> exit()
```

6. **Запустите приложение**:
```bash
python run.py
```

Приложение будет доступно по адресу `http://localhost:5000`

## Структура проекта

```
PetShop_Flask/
├── app/
│   ├── static/
│   │   ├── css/
│   │   │   ├── style.css        # Основные стили
│   │   │   └── auth.css         # Стили аутентификации
│   │   ├── js/
│   │   │   ├── main.js          # Основной JavaScript
│   │   │   └── auth.js          # JavaScript аутентификации
│   │   └── uploads/             # Загруженные файлы
│   ├── templates/
│   │   ├── base.html            # Базовый шаблон
│   │   ├── index.html           # Главная страница
│   │   ├── auth/
│   │   │   ├── login.html       # Страница входа
│   │   │   └── register.html    # Страница регистрации
│   │   ├── products/
│   │   │   ├── list.html        # Список товаров
│   │   │   └── detail.html      # Деталь товара
│   │   ├── cart/
│   │   │   └── view.html        # Корзина
│   │   ├── profile/
│   │   │   ├── view.html        # Профиль
│   │   │   ├── edit.html        # Редактирование профиля
│   │   │   ├── orders.html      # Заказы
│   │   │   ├── addresses.html   # Адреса
│   │   │   └── favorites.html   # Избранное
│   │   ├── admin/
│   │   │   ├── dashboard.html   # Админ-панель
│   │   │   ├── products.html    # Управление товарами
│   │   │   └── users.html       # Управление пользователями
│   │   ├── errors/
│   │   │   ├── 404.html         # Ошибка 404
│   │   │   ├── 403.html         # Ошибка 403
│   │   │   └── 500.html         # Ошибка 500
│   │   ├── about.html           # О нас
│   │   └── privacy.html         # Политика конфиденциальности
│   ├── __init__.py              # Инициализация приложения
│   ├── models.py                # Модели БД
│   └── routes.py                # Маршруты приложения
├── config.py                    # Конфигурация
├── run.py                       # Точка входа
├── requirements.txt             # Зависимости
├── .gitignore                   # Git ignore
└── README.md                    # Документация
```

## Модели БД

### Нормализованная схема

- **User**: Пользователи с ролями (user, admin)
- **Category**: Категории товаров
- **Product**: Товары с ценами и остатками
- **CartItem**: Товары в корзине (уникальное сочетание user + product)
- **Favorite**: Избранные товары (уникальное сочетание user + product)
- **Address**: Адреса доставки пользователей
- **Order**: Заказы с статусами
- **OrderItem**: Товары в заказе (снимок товара на момент заказа)
- **Review**: Отзывы на товары (уникальное сочетание product + user)

## Использование

### Для пользователей

1. **Регистрация**: Перейдите на страницу регистрации и создайте аккаунт
2. **Просмотр товаров**: Используйте каталог для поиска товаров
3. **Добавление в корзину**: Нажмите кнопку "В корзину"
4. **Профиль**: Управляйте своими данными и адресами
5. **Заказы**: Просмотрите историю заказов
6. **Отзывы**: Оставляйте отзывы на товары

### Для администраторов

1. **Админ-панель**: Доступна по адресу `/admin/`
2. **Управление товарами**: Добавление, редактирование, удаление товаров
3. **Управление пользователями**: Просмотр и управление пользователями
4. **Статистика**: Просмотр основных метрик

## Конфигурация

### Переменные окружения

- `FLASK_ENV`: Окружение (development, production)
- `SECRET_KEY`: Секретный ключ приложения
- `DATABASE_URL`: URL базы данных (по умолчанию SQLite)
- `MAIL_SERVER`: SMTP сервер для отправки писем
- `MAIL_USERNAME`: Имя пользователя для SMTP
- `MAIL_PASSWORD`: Пароль для SMTP

## Разработка

### Запуск в режиме разработки

```bash
export FLASK_ENV=development
python run.py
```

### Создание администратора

```python
from app import create_app, db
from app.models import User, UserRole

app = create_app()
with app.app_context():
    admin = User(
        username='admin',
        email='admin@example.com',
        role=UserRole.ADMIN,
        is_verified=True
    )
    admin.set_password('password')
    db.session.add(admin)
    db.session.commit()
    print('Admin user created!')
```

## Лицензия

MIT License

## Автор

PetShop Team

## Поддержка

Для вопросов и поддержки свяжитесь с нами по адресу: info@petshop.ru
