{% extends "base.html" %}

{% block title %}Заказ подтверждён - PetShop{% endblock %}

{% block content %}
<section class="cart-page">
    <div class="container">
        <div class="text-center py-5">
            <i class="fas fa-check-circle text-success" style="font-size: 5rem;"></i>
            <h1 class="mt-4">Заказ успешно оформлен!</h1>
            <p class="lead text-muted">Спасибо за покупку! Мы уже начали обработку вашего заказа.</p>
        </div>

        <div class="cart-layout">
            <div class="cart-items">
                <div class="cart-item p-4">
                    <h3><i class="fas fa-shopping-bag"></i> Заказ №{{ order.order_number }}</h3>
                    <div class="mt-3 text-muted">
                        <p><strong>Дата:</strong> {{ order.created_at.strftime('%d %B %Y в %H:%M') }}</p>
                        <p><strong>Статус:</strong> 
                            <span class="badge badge-info">{{ order.status.value.capitalize() }}</span>
                        </p>
                        <p><strong>Способ оплаты:</strong> При получении</p>
                    </div>

                    <h5 class="mt-4">Состав заказа:</h5>
                    <ul class="list-unstyled">
                        {% for item in order.items %}
                            <li class="d-flex justify-content-between py-2 border-bottom">
                                <span>{{ item.product.name }} × {{ item.quantity }}</span>
                                <strong>{{ (item.price * item.quantity)|int }} ₽</strong>
                            </li>
                        {% endfor %}
                    </ul>

                    <div class="mt-4 pt-3 border-top">
                        <h4>Итого: <strong class="text-primary">{{ order.total|int }} ₽</strong></h4>
                    </div>
                </div>
            </div>

            <div class="cart-summary">
                <h3>Что дальше?</h3>
                <p class="text-muted">
                    Мы отправим вам письмо с подтверждением и начнём сборку заказа.
                    Вы сможете отслеживать статус в личном кабинете.
                </p>

                <div class="d-grid gap-3 mt-4">
                    <a href="{{ url_for('profile.view_orders') }}" class="btn btn-primary btn-lg">
                        <i class="fas fa-list"></i> Мои заказы
                    </a>
                    <a href="{{ url_for('main.index') }}" class="btn btn-outline btn-lg">
                        <i class="fas fa-home"></i> На главную
                    </a>
                    <a href="{{ url_for('product.list_products') }}" class="btn btn-outline btn-lg">
                        <i class="fas fa-paw"></i> Продолжить покупки
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}